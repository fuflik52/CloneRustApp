—á–∏—Ç–∞–π –∏ –¥–µ–ª–∞–π
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–Ω—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –ø–ª–∞–≥–∏–Ω–µ

–ü–ª–∞–≥–∏–Ω `PanRust.cs` —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–Ω—É–º–µ–Ω—Ç–∞—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

### –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç

**POST** `/api/monuments`

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

```json
{
  "monuments": [
    {
      "name": "Airfield",
      "x": 150.5,
      "y": 100.2,
      "z": -200.8,
      "type": "Monument"
    },
    {
      "name": "Supermarket",
      "x": -50.3,
      "y": 95.1,
      "z": 300.4,
      "type": "Building"
    }
  ],
  "worldSize": 4000,
  "hostname": "192.168.1.100"
}
```

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π

- **monuments** - –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –º–æ–Ω—É–º–µ–Ω—Ç–æ–≤
  - **name** - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–Ω—É–º–µ–Ω—Ç–∞ (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º, –∫–∞–∫ –≤ –∏–≥—Ä–µ)
  - **x, y, z** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–Ω—É–º–µ–Ω—Ç–∞ –≤ –º–∏—Ä–µ
  - **type** - —Ç–∏–ø –º–æ–Ω—É–º–µ–Ω—Ç–∞ (Monument, Building, Cave –∏ —Ç.–¥.)
- **worldSize** - —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã (–æ–±—ã—á–Ω–æ 3000, 4000, 5000 –∏ —Ç.–¥.)
- **hostname** - IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### 1. –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

```typescript
// Backend (Node.js/Express –ø—Ä–∏–º–µ—Ä)
app.post('/api/monuments', authenticateServer, async (req, res) => {
  const { monuments, worldSize, hostname } = req.body;
  
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
  await db.servers.updateOne(
    { hostname },
    { 
      $set: { 
        monuments,
        worldSize,
        lastMonumentsUpdate: new Date()
      }
    }
  );
  
  res.status(200).json({ success: true });
});
```

### 2. –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –º–æ–Ω—É–º–µ–Ω—Ç—ã –Ω–∞ –∫–∞—Ä—Ç–µ

```typescript
// Frontend (React/Vue –ø—Ä–∏–º–µ—Ä)
interface Monument {
  name: string;
  x: number;
  y: number;
  z: number;
  type: string;
}

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç Rust –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞—Ä—Ç—ã
function rustToMapCoords(x: number, z: number, worldSize: number, mapSize: number) {
  // Rust –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—Ç—ã = (0, 0)
  // –ö–∞—Ä—Ç–∞: –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª = (0, 0)
  const mapX = ((x + worldSize / 2) / worldSize) * mapSize;
  const mapY = ((z + worldSize / 2) / worldSize) * mapSize;
  
  return { x: mapX, y: mapY };
}

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–æ–Ω—É–º–µ–Ω—Ç–æ–≤
function renderMonuments(monuments: Monument[], worldSize: number, mapSize: number) {
  monuments.forEach(monument => {
    const { x, y } = rustToMapCoords(monument.x, monument.z, worldSize, mapSize);
    
    // –°–æ–∑–¥–∞—Ç—å –º–∞—Ä–∫–µ—Ä –Ω–∞ –∫–∞—Ä—Ç–µ
    const marker = createMarker({
      position: { x, y },
      icon: getMonumentIcon(monument.name), // –ò–∫–æ–Ω–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
      label: monument.name,
      type: 'monument'
    });
    
    map.addMarker(marker);
  });
}
```

### 3. –ò–∫–æ–Ω–∫–∏ –¥–ª—è –º–æ–Ω—É–º–µ–Ω—Ç–æ–≤

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –º–æ–Ω—É–º–µ–Ω—Ç–æ–≤:

- **Airfield** - üõ©Ô∏è (–∏–∫–æ–Ω–∫–∞ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞)
- **Launch Site** - üöÄ (—Ä–∞–∫–µ—Ç–∞)
- **Military Tunnel** - üéñÔ∏è (–≤–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞)
- **Power Plant** - ‚ö° (—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏—è)
- **Water Treatment** - üíß (–æ—á–∏—Å—Ç–∫–∞ –≤–æ–¥—ã)
- **Train Yard** - üöÇ (–ø–æ–µ–∑–¥)
- **Dome** - üèõÔ∏è (–∫—É–ø–æ–ª)
- **Satellite Dish** - üì° (—Å–ø—É—Ç–Ω–∏–∫–æ–≤–∞—è —Ç–∞—Ä–µ–ª–∫–∞)
- **Supermarket** - üè™ (–º–∞–≥–∞–∑–∏–Ω)
- **Gas Station** - ‚õΩ (–∑–∞–ø—Ä–∞–≤–∫–∞)
- **Lighthouse** - üóº (–º–∞—è–∫)
- **Harbor** - ‚öì (–ø–æ—Ä—Ç)
- **Junkyard** - üèöÔ∏è (—Å–≤–∞–ª–∫–∞)
- **Mining Outpost** - ‚õèÔ∏è (—à–∞—Ö—Ç–∞)
- **Quarry** - üèóÔ∏è (–∫–∞—Ä—å–µ—Ä)
- **Sewer Branch** - üö∞ (–∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è)
- **Underwater Lab** - üî¨ (–ø–æ–¥–≤–æ–¥–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è)
- **Fishing Village** - üé£ (—Ä—ã–±–∞—Ü–∫–∞—è –¥–µ—Ä–µ–≤–Ω—è)
- **Bandit Camp** - üèïÔ∏è (–ª–∞–≥–µ—Ä—å –±–∞–Ω–¥–∏—Ç–æ–≤)
- **Outpost** - üèòÔ∏è (–∞–≤–∞–Ω–ø–æ—Å—Ç)

### 4. –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (React)

```tsx
import React, { useEffect, useState } from 'react';

interface Monument {
  name: string;
  x: number;
  y: number;
  z: number;
  type: string;
}

interface MapData {
  mapUrl: string;
  worldSize: number;
  monuments: Monument[];
}

const ServerMap: React.FC<{ serverId: string }> = ({ serverId }) => {
  const [mapData, setMapData] = useState<MapData | null>(null);
  const [selectedMonument, setSelectedMonument] = useState<Monument | null>(null);

  useEffect(() => {
    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
    fetch(`/api/servers/${serverId}/map`)
      .then(res => res.json())
      .then(data => setMapData(data));
  }, [serverId]);

  if (!mapData) return <div>Loading...</div>;

  return (
    <div className="map-container">
      <img src={mapData.mapUrl} alt="Server Map" className="map-image" />
      
      {/* –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–æ–Ω—É–º–µ–Ω—Ç–æ–≤ */}
      {mapData.monuments.map((monument, idx) => {
        const { x, y } = rustToMapCoords(
          monument.x, 
          monument.z, 
          mapData.worldSize, 
          1000 // —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
        );
        
        return (
          <div
            key={idx}
            className="monument-marker"
            style={{ left: x, top: y }}
            onClick={() => setSelectedMonument(monument)}
            title={monument.name}
          >
            {getMonumentIcon(monument.name)}
          </div>
        );
      })}
      
      {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –º–æ–Ω—É–º–µ–Ω—Ç–µ */}
      {selectedMonument && (
        <div className="monument-info">
          <h3>{selectedMonument.name}</h3>
          <p>Type: {selectedMonument.type}</p>
          <p>Coordinates: ({selectedMonument.x.toFixed(1)}, {selectedMonument.z.toFixed(1)})</p>
        </div>
      )}
    </div>
  );
};

function getMonumentIcon(name: string): string {
  const icons: Record<string, string> = {
    'Airfield': 'üõ©Ô∏è',
    'Launch Site': 'üöÄ',
    'Military Tunnel': 'üéñÔ∏è',
    'Power Plant': '‚ö°',
    'Water Treatment': 'üíß',
    'Train Yard': 'üöÇ',
    'Dome': 'üèõÔ∏è',
    'Satellite Dish': 'üì°',
    'Supermarket': 'üè™',
    'Gas Station': '‚õΩ',
    'Lighthouse': 'üóº',
    'Harbor': '‚öì',
    'Junkyard': 'üèöÔ∏è',
    'Mining Outpost': '‚õèÔ∏è',
    'Quarry': 'üèóÔ∏è',
    'Sewer Branch': 'üö∞',
    'Underwater Lab': 'üî¨',
    'Fishing Village': 'üé£',
    'Bandit Camp': 'üèïÔ∏è',
    'Outpost': 'üèòÔ∏è'
  };
  
  return icons[name] || 'üìç';
}

function rustToMapCoords(x: number, z: number, worldSize: number, mapSize: number) {
  const mapX = ((x + worldSize / 2) / worldSize) * mapSize;
  const mapY = ((z + worldSize / 2) / worldSize) * mapSize;
  return { x: mapX, y: mapY };
}
```

### 5. CSS –¥–ª—è –º–∞—Ä–∫–µ—Ä–æ–≤

```css
.map-container {
  position: relative;
  width: 1000px;
  height: 1000px;
}

.map-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.monument-marker {
  position: absolute;
  transform: translate(-50%, -50%);
  font-size: 24px;
  cursor: pointer;
  transition: transform 0.2s;
  z-index: 10;
  filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.8));
}

.monument-marker:hover {
  transform: translate(-50%, -50%) scale(1.3);
  z-index: 20;
}

.monument-info {
  position: absolute;
  bottom: 20px;
  left: 20px;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 15px;
  border-radius: 8px;
  z-index: 100;
}
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–æ–Ω—É–º–µ–Ω—Ç–æ–≤

```typescript
const [filter, setFilter] = useState<string>('all');

const filteredMonuments = monuments.filter(m => {
  if (filter === 'all') return true;
  if (filter === 'military') return ['Airfield', 'Launch Site', 'Military Tunnel'].includes(m.name);
  if (filter === 'safe') return ['Outpost', 'Bandit Camp'].includes(m.name);
  return true;
});
```

### –ü–æ–∫–∞–∑ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç –∏–≥—Ä–æ–∫–∞ –¥–æ –º–æ–Ω—É–º–µ–Ω—Ç–∞

```typescript
function calculateDistance(x1: number, z1: number, x2: number, z2: number): number {
  return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(z2 - z1, 2));
}

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
{monuments.map(monument => {
  const distance = calculateDistance(
    playerPosition.x, 
    playerPosition.z,
    monument.x,
    monument.z
  );
  
  return (
    <div>
      {monument.name} - {distance.toFixed(0)}m
    </div>
  );
})}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä Rust —Å –ø–ª–∞–≥–∏–Ω–æ–º
2. –ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –º–æ–Ω—É–º–µ–Ω—Ç–∞—Ö —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–ª–∞–≥–∏–Ω–∞: `Monuments sent successfully (X monuments)`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—à–ª–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥
5. –û—Ç–æ–±—Ä–∞–∑–∏—Ç–µ –º–æ–Ω—É–º–µ–Ω—Ç—ã –Ω–∞ –∫–∞—Ä—Ç–µ

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã Y (–≤—ã—Å–æ—Ç–∞) –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–¥–∑–µ–º–Ω—ã—Ö –º–æ–Ω—É–º–µ–Ω—Ç–æ–≤
- –ú–æ–Ω—É–º–µ–Ω—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–∏ —Å–º–µ–Ω–µ –∫–∞—Ä—Ç—ã (–≤–∞–π–ø–µ) –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –†–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã (worldSize) –Ω—É–∂–µ–Ω –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
